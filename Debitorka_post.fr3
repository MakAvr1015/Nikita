<?xml version="1.0" encoding="utf-8"?>
<TfrxReport Name="" Version="3.21" DotMatrixReport="False" IniFile="\Software\Fast Reports" PreviewOptions.Buttons="4095" PreviewOptions.Zoom="1" PrintOptions.Printer="Default" ReportOptions.CreateDate="40490.7995124421" ReportOptions.Description.Text="" ReportOptions.Name="Äåáèòîðêà ïî Ïîñòàâùèêó" ReportOptions.LastChange="40588.8899549884" ScriptLanguage="PascalScript" ScriptText.Text="procedure Button1OnClick(Sender: TfrxComponent);&#13;&#10;begin&#13;&#10;  Report.Variables.Variables['start_date']:=DateEdit_str.Date;&#13;&#10;  Report.Variables.Variables['end_date']:=DateEdit_end.Date;&#13;&#10;  Report.Variables.Variables['f_post']:=dbPostav_vla.KeyValue;&#13;&#10;&#13;&#10;end;&#13;&#10;&#13;&#10;procedure DialogPage1OnShow(Sender: TfrxComponent);&#13;&#10;begin&#13;&#10;  DateEdit_str.date:=date;&#13;&#10;  DateEdit_end.date:=date;&#13;&#10;  DsPostav.Active:=true;&#13;&#10;end;&#13;&#10;&#13;&#10;begin&#13;&#10;&#13;&#10;end." PropData="044C65667403180103546F70027008446174617365747301010C2A00000020446174615365743D226473526573756C742220446174615365744E616D653D226473526573756C742200010C2A00000020446174615365743D226473506F737461762220446174615365744E616D653D226473506F73746176220000095661726961626C657301010C0C000000204E616D653D222056616C2200010C12000000204E616D653D2273746172745F646174652200010C10000000204E616D653D22656E645F646174652200010C16000000204E616D653D225446726D4E7369506172746E65722200010C0E000000204E616D653D22665F6E616D652200010C0C000000204E616D653D22465F49442200010C0E000000204E616D653D22665F706F7374220000055374796C650100">
  <TfrxDialogPage Name="DialogPage1" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Tahoma" Font.Style="0" Height="157" Left="349" Top="286" Width="238" OnShow="DialogPage1OnShow">
    <TfrxDateEditControl Name="DateEdit_str" Left="8" Top="28" Width="97" Height="21" Color="-16777211" Date="40326.8342829398" Time="40326.8342829398"/>
    <TfrxDateEditControl Name="DateEdit_end" Left="120" Top="28" Width="97" Height="21" Color="-16777211" Date="40326.8342829398" Time="40326.8342829398"/>
    <TfrxLabelControl Name="Label1" Left="8" Top="8" Width="83" Height="13" Caption="Íà÷àëî ïåðèîäà" Color="-16777201"/>
    <TfrxLabelControl Name="Label2" Left="120" Top="8" Width="102" Height="13" Caption="Îêîí÷àíèå ïåðèîäà" Color="-16777201"/>
    <TfrxButtonControl Name="Button1" Left="4" Top="96" Width="99" Height="25" Caption="Ñôîðìèðîâàòü" ModalResult="1" OnClick="Button1OnClick"/>
    <TfrxButtonControl Name="Button2" Left="120" Top="96" Width="99" Height="25" Caption="Îòìåíà" ModalResult="2"/>
    <TfrxFIBQuery Name="dsPostav" UserName="dsPostav" CloseDataSource="True" FieldAliases.Text="" SQL.Text="select *&#13;&#10;from&#13;&#10;(&#13;&#10;select&#13;&#10;  f_partner as grp_id,&#13;&#10;  (select f_name from sp_t_nsi_partner_get(f_partner)) as f_name&#13;&#10;from&#13;&#10; t_nsi_goods&#13;&#10;where f_partner is not null&#13;&#10;group by f_partner&#13;&#10;)&#13;&#10;order by grp_id" PropData="0A506172616D65746572730100"/>
    <TfrxDBLookupComboBox Name="DbPostav_vla" Left="8" Top="64" Width="209" Height="21" ListField="F_NAME" DataSet="dsPostav" DataSetName="dsPostav" KeyField="GRP_ID"/>
  </TfrxDialogPage>
  <TfrxReportPage Name="Page1" PaperWidth="210" PaperHeight="297" PaperSize="9" LeftMargin="5" RightMargin="5" TopMargin="5" BottomMargin="5" ColumnWidth="0" ColumnPositions.Text="" HGuides.Text="" VGuides.Text="">
    <TfrxFIBQuery Name="dsResult" UserName="dsResult" CloseDataSource="True" FieldAliases.Text="" SQL.Text="select m.f_name,m.f_u_addres,&#13;&#10;  (select f_result from SP_T_NSI_PARTNER_INFO_GET(m.f_id,4)) as f_region,&#13;&#10;  (select f_result from SP_T_NSI_PARTNER_INFO_GET(m.f_id,6)) as f_gorod,&#13;&#10;  k.*&#13;&#10;from&#13;&#10;(select&#13;&#10;  m.f_id as f_partner,&#13;&#10;  f_out_before_period,&#13;&#10;  f_pay_before_period,&#13;&#10;  f_in_before_period,&#13;&#10;  f_out_by_period,&#13;&#10;  f_pay_by_period,&#13;&#10;  f_in_by_period&#13;&#10;from&#13;&#10; t_nsi_partner m&#13;&#10; left join&#13;&#10; (select&#13;&#10;   d1.f_partner,&#13;&#10;   sum(case&#13;&#10;     when d1.f_date&#62;=:str_date then (s1.f_cnt*s1.f_price_val)&#13;&#10;     else cast(0 as numeric(15,3))&#13;&#10;     end) as f_out_by_period,&#13;&#10;   sum(case&#13;&#10;     when d1.f_date&#60;:str_date then (s1.f_cnt*s1.f_price_val)&#13;&#10;     else cast(0 as numeric(15,3))&#13;&#10;     end) as f_out_before_period&#13;&#10;  from&#13;&#10;    t_doc_out d1&#13;&#10;    inner join t_doc_out_str s1 on d1.f_id=s1.f_doc_out&#13;&#10;    inner join t_nsi_goods g on g.f_id=s1.f_good and g.f_partner=:f_postav&#13;&#10;  where&#13;&#10;  d1.f_date&#60;=:end_date and f_state&#62;=3&#13;&#10;  group by d1.f_partner&#13;&#10;  ) d on m.f_id=d.f_partner&#13;&#10; left join&#13;&#10; (select&#13;&#10;   f_partner,&#13;&#10;   sum(case&#13;&#10;     when f_date&#62;=:str_date then f_summa&#13;&#10;     else cast(0 as numeric(15,3))&#13;&#10;     end) as f_pay_by_period,&#13;&#10;   sum(case&#13;&#10;     when f_date&#60;:str_date then f_summa&#13;&#10;     else cast(0 as numeric(15,3))&#13;&#10;     end) as f_pay_before_period&#13;&#10;   from&#13;&#10;     t_money_in&#13;&#10;   where&#13;&#10;     f_date&#60;=:end_date and f_state&#62;=3&#13;&#10;     group by f_partner&#13;&#10;  ) p&#13;&#10;  on m.f_id=p.f_partner&#13;&#10; left join&#13;&#10; (select&#13;&#10;   d2.f_partner,&#13;&#10;   sum(case&#13;&#10;     when d2.f_date&#62;=:str_date then (s2.f_cnt*s2.f_price_val)&#13;&#10;     else cast(0 as numeric(15,3))&#13;&#10;     end) as f_in_by_period,&#13;&#10;   sum(case&#13;&#10;     when d2.f_date&#60;:str_date then (s2.f_cnt*s2.f_price_val)&#13;&#10;     else cast(0 as numeric(15,3))&#13;&#10;     end) as f_in_before_period&#13;&#10;  from t_doc_in d2&#13;&#10;    inner join t_doc_in_str s2 on d2.f_id=s2.f_doc_in&#13;&#10;    inner join t_nsi_goods g2 on s2.f_good=g2.f_id and g2.f_partner=:f_postav&#13;&#10;  where d2.f_date&#60;=:end_date and f_state&#62;=3 and f_type&#60;&#62;1&#13;&#10;  group by d2.f_partner) i&#13;&#10;  on m.f_id=i.f_partner&#13;&#10;)   k&#13;&#10;inner join t_nsi_partner m on k.f_partner=m.f_id&#13;&#10;where&#13;&#10; not exists (select 1 from t_nsi_partner_info pp where k.f_partner=pp.f_partner and pp.f_info_name=5 and pp.f_value='Ñëóæåáíûé')&#13;&#10; and m.f_name is not null and m.f_name &#60;&#62; ''&#13;&#10;order by f_region,f_name" PropData="0A506172616D657465727301010C44000000204E616D653D227374725F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B73746172745F64617465262336323B2200010C44000000204E616D653D227374725F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B73746172745F64617465262336323B2200010C43000000204E616D653D22665F706F73746176222044617461547970653D226674496E7465676572222045787072657373696F6E3D22262336303B665F706F7374262336323B2200010C42000000204E616D653D22656E645F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B656E645F64617465262336323B2200010C44000000204E616D653D227374725F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B73746172745F64617465262336323B2200010C44000000204E616D653D227374725F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B73746172745F64617465262336323B2200010C42000000204E616D653D22656E645F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B656E645F64617465262336323B2200010C44000000204E616D653D227374725F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B73746172745F64617465262336323B2200010C44000000204E616D653D227374725F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B73746172745F64617465262336323B2200010C43000000204E616D653D22665F706F73746176222044617461547970653D226674496E7465676572222045787072657373696F6E3D22262336303B665F706F7374262336323B2200010C42000000204E616D653D22656E645F64617465222044617461547970653D22667444617465222045787072657373696F6E3D22262336303B656E645F64617465262336323B220000"/>
    <TfrxReportTitle Name="ReportTitle1" Height="30.23624" Left="0" Top="18.89765" Width="755.906">
      <TfrxMemoView Name="Memo14" Align="baWidth" Left="0" Top="0" Width="755.906" Height="26.45671" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" HAlign="haCenter" ParentFont="False" Text="Ð ÐµÐµÑÑ‚Ñ€ Ð”ÐµÐ±Ð¸Ñ‚Ð¾Ñ€ÑÐºÐ¾Ð¹ Ð·Ð°Ð´Ð¾Ð»Ð¶ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð·Ð° Ð¿ÐµÑ€Ð¸Ð¾Ð´ Ñ [DateToStr(&#60;start_date&#62;)] Ð¿Ð¾ [DateToStr(&#60;end_date&#62;)]"/>
    </TfrxReportTitle>
    <TfrxHeader Name="Header1" Height="37.7953" Left="0" Top="109.60637" Width="755.906">
      <TfrxMemoView Name="Memo12" Left="-2.09684700158697E-16" Top="0" Width="347.71676" Height="37.7953" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" VAlign="vaCenter" Text="ÐŸÐ°Ñ€Ñ‚Ð½ÐµÑ€"/>
      <TfrxMemoView Name="Memo19" Left="347.71676" Top="0" Width="132.28355" Height="37.7953" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" VAlign="vaCenter" Text="Ð“Ð¾Ñ€Ð¾Ð´"/>
      <TfrxMemoView Name="Memo21" Left="480.00031" Top="18.89765" Width="79.37013" Height="18.89765" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" Text="ÐžÑ‚Ð³Ñ€ÑƒÐ·ÐºÐ¸"/>
      <TfrxMemoView Name="Memo22" Left="559.37044" Top="18.89765" Width="79.37013" Height="18.89765" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" Text="ÐžÐ¿Ð»Ð°Ñ‚Ñ‹"/>
      <TfrxMemoView Name="Memo23" Left="638.74057" Top="18.89765" Width="79.37013" Height="18.89765" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" Text="Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ñ‹"/>
      <TfrxMemoView Name="Memo25" Left="480.00031" Top="0" Width="238.11039" Height="18.89765" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="Ð—Ð° Ð¿ÐµÑ€Ð¸Ð¾Ð´"/>
    </TfrxHeader>
    <TfrxMasterData Name="MasterData1" Height="18.89765" Left="0" Top="211.65368" Width="755.906" ColumnWidth="0" ColumnGap="0" DataSet="dsResult" DataSetName="dsResult" RowCount="0" Stretched="True">
      <TfrxMemoView Name="Memo1" Left="-2.09684700158697E-16" Top="0" Width="347.71676" Height="18.89765" StretchMode="smMaxHeight" DataField="F_NAME" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" Text="[dsResult.&#34;F_NAME&#34;]"/>
      <TfrxMemoView Name="Memo6" Left="347.71676" Top="0" Width="132.28355" Height="18.89765" StretchMode="smMaxHeight" DataField="F_GOROD" DataSet="dsResult" DataSetName="dsResult" Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" Text="[dsResult.&#34;F_GOROD&#34;]"/>
      <TfrxMemoView Name="Memo8" Left="480.00031" Top="0" Width="79.37013" Height="18.89765" StretchMode="smMaxHeight" DataField="F_OUT_BY_PERIOD" DataSet="dsResult" DataSetName="dsResult" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" Text="[dsResult.&#34;F_OUT_BY_PERIOD&#34;]"/>
      <TfrxMemoView Name="Memo9" Left="559.37044" Top="0" Width="79.37013" Height="18.89765" StretchMode="smMaxHeight" DataField="F_PAY_BY_PERIOD" DataSet="dsResult" DataSetName="dsResult" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" Text="[dsResult.&#34;F_PAY_BY_PERIOD&#34;]"/>
      <TfrxMemoView Name="Memo10" Left="638.74057" Top="0" Width="79.37013" Height="18.89765" StretchMode="smMaxHeight" DataField="F_IN_BY_PERIOD" DataSet="dsResult" DataSetName="dsResult" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" Text="[dsResult.&#34;F_IN_BY_PERIOD&#34;]"/>
    </TfrxMasterData>
    <TfrxFooter Name="Footer1" Height="18.89765" Left="0" Top="294.80334" Width="755.906">
      <TfrxMemoView Name="Memo15" Left="-2.09684700158697E-16" Top="0" Width="480.00031" Height="18.89765" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" Frame.Width="2" ParentFont="False" Text="ÐžÐ±Ñ‰Ð¸Ð¹ Ð¸Ñ‚Ð¾Ð³"/>
      <TfrxSysMemoView Name="SysMemo2" Left="480.00031" Top="0" Width="79.37013" Height="18.89765" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" Frame.Width="2" HAlign="haRight" ParentFont="False" Text="[SUM(&#60;dsResult.&#34;F_OUT_BY_PERIOD&#34;&#62;,MasterData1)]"/>
      <TfrxSysMemoView Name="SysMemo4" Left="559.37044" Top="0" Width="79.37013" Height="18.89765" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" Frame.Width="2" HAlign="haRight" ParentFont="False" Text="[SUM(&#60;dsResult.&#34;F_PAY_BY_PERIOD&#34;&#62;,MasterData1)]"/>
      <TfrxSysMemoView Name="SysMemo5" Left="638.74057" Top="0" Width="79.37013" Height="18.89765" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="1" Frame.Typ="15" Frame.Width="2" HAlign="haRight" ParentFont="False" Text="[SUM(&#60;dsResult.&#34;F_IN_BY_PERIOD&#34;&#62;,MasterData1)]"/>
    </TfrxFooter>
    <TfrxGroupHeader Name="GroupHeader1" Height="18.89765" Left="0" Top="170.07885" Width="755.906" Condition="dsResult.&#34;F_REGION&#34;">
      <TfrxMemoView Name="Memo3" Left="-2.09684700158697E-16" Top="0" Width="71.81107" Height="18.89765" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" ParentFont="False" Text="Ð ÐµÐ³Ð¸Ð¾Ð½"/>
      <TfrxMemoView Name="Memo2" Left="71.81107" Top="0" Width="646.29963" Height="18.89765" Text="[dsResult.&#34;F_REGION&#34;]"/>
    </TfrxGroupHeader>
    <TfrxGroupFooter Name="GroupFooter1" Height="18.89765" Left="0" Top="253.22851" Width="755.906">
      <TfrxMemoView Name="Memo16" Left="-2.09684700158697E-16" Top="0" Width="480.00031" Height="18.89765" Color="15000804" Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" Frame.Typ="15" ParentFont="False" Text="Ð˜Ñ‚Ð¾Ð³ Ð¿Ð¾ Ñ€ÐµÐ³Ð¸Ð¾Ð½Ñƒ [dsResult.&#34;F_REGION&#34;]"/>
      <TfrxSysMemoView Name="SysMemo8" Left="480.00031" Top="0" Width="79.37013" Height="18.89765" Color="15000804" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" Text="[SUM(&#60;dsResult.&#34;F_OUT_BY_PERIOD&#34;&#62;,MasterData1)]"/>
      <TfrxSysMemoView Name="SysMemo9" Left="559.37044" Top="0" Width="79.37013" Height="18.89765" Color="15000804" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" Text="[SUM(&#60;dsResult.&#34;F_PAY_BY_PERIOD&#34;&#62;,MasterData1)]"/>
      <TfrxSysMemoView Name="SysMemo10" Left="638.74057" Top="0" Width="79.37013" Height="18.89765" Color="15000804" DisplayFormat.DecimalSeparator="." DisplayFormat.FormatStr="%g" DisplayFormat.Kind="fkNumeric" Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="0" Frame.Typ="15" HAlign="haRight" ParentFont="False" Text="[SUM(&#60;dsResult.&#34;F_IN_BY_PERIOD&#34;&#62;,MasterData1)]"/>
    </TfrxGroupFooter>
  </TfrxReportPage>
</TfrxReport>
